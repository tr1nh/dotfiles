#!/usr/bin/env bash

# Script that pick a picture from folder by time.
# If user not input folder path, the default path will be ~/Pictures/.wallpaper/
# The last wallpaper used will be save in Pictures/.wallpaper.jpg for next session

randomwallpaper(){
	# Check if no input folder path:
	if [ -z $1 ]; then
		folderpath="$HOME/.local/share/backgrounds"
	else
		folderpath="$1"
	fi


	# Shuffle a pictures from folder:
	wallpapername=$(ls "$folderpath" | grep -E 'png|jpeg|jpg|gif' | shuf -n 1)
	wallpaperpath=$folderpath/$wallpapername

	wallpaper "$wallpaperpath"
}

# Run interval:
runinterval(){
	a=0;
	while [ a != 1 ]
	do
		randomwallpaper $1;
		sleep $2;
	done
}

# Check interval:
if [ -z $2 ]; then
	randomwallpaper $1
else
	runinterval $1 $2;
fi

